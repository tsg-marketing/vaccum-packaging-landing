# Импорт товаров из YML фида Техносиб

## Описание

Этот проект содержит инструменты для автоматической загрузки актуальных цен и товаров из YML фида интернет-магазина Техносиб (tehnosib.ru).

## Что делают скрипты

Скрипты загружают XML/YML фид от Техносиб и извлекают товары, связанные с:
- **Вакуумной упаковкой**: вакуумные упаковщики, камерные вакуумные машины
- **Термоупаковкой**: термоусадочные машины, L-сварщики, туннели

Для каждого товара извлекаются:
- `name` - название товара
- `price` - цена в рублях
- `vendorCode` - артикул производителя
- `description` - описание товара
- `image` - URL главной картинки
- `images` - массив всех URL картинок
- `categoryId` - ID категории
- `categoryName` - название категории
- `params` - дополнительные параметры товара

## Доступные инструменты

### 1. Node.js скрипт (рекомендуется)

**Файл**: `load-tehnosib.mjs`

**Запуск**:
```bash
node load-tehnosib.mjs
```

Скрипт загрузит данные и сохранит их в файл `tehnosib_products.json` в корне проекта.

### 2. TypeScript утилита

**Файл**: `src/utils/tehnosib-loader.ts`

Утилита может быть импортирована в ваш TypeScript/React код:

```typescript
import { loadTehnosibProducts, formatProductsList } from '@/utils/tehnosib-loader';

// Загрузить товары
const products = await loadTehnosibProducts();

// Отформатировать список
console.log(formatProductsList(products));
```

### 3. Python скрипт (альтернатива)

**Файл**: `scripts/import_tehnosib.py`

**Запуск**:
```bash
python3 scripts/import_tehnosib.py
```

### 4. Backend функции

- **Python**: `backend/tehnosib-import/` - серверная функция на Python
- **TypeScript**: `backend/tehnosib-sync/` - серверная функция на TypeScript/Node.js

## Формат выходных данных

Результат сохраняется в файл `tehnosib_products.json` в следующем формате:

```json
[
  {
    "name": "Вакуумный упаковщик DZ-400/2T",
    "price": "45000",
    "vendorCode": "DZ-400/2T",
    "description": "Камерный вакуумный упаковщик с двумя планками запайки...",
    "image": "https://tehnosib.ru/upload/images/product_123.jpg",
    "images": [
      "https://tehnosib.ru/upload/images/product_123.jpg",
      "https://tehnosib.ru/upload/images/product_123_2.jpg"
    ],
    "categoryId": "42",
    "categoryName": "Вакуумные упаковщики",
    "params": {
      "Мощность": "0.8 кВт",
      "Производительность": "4-6 циклов/мин",
      "Длина планки": "400 мм"
    }
  }
]
```

## Быстрый старт

1. Убедитесь, что у вас установлен Node.js (v18+)

2. Запустите скрипт загрузки:
```bash
node load-tehnosib.mjs
```

3. После выполнения скрипта вы получите:
   - Файл `tehnosib_products.json` с полным списком товаров
   - Вывод в консоль с примерами найденных товаров
   - Статистику по количеству найденных товаров

4. Используйте полученный JSON для обновления вашего каталога товаров

## Фильтрация товаров

Скрипты автоматически фильтруют товары по ключевым словам:

**Вакуумная упаковка**:
- вакуум, вакуумный, вакуумная, вакуумные
- камерный, камерная, камерные

**Термоупаковка**:
- термо, термоупак, термоусад, усадочн
- l-сварщик, l сварщик, сварщик
- туннель, запайщик

Поиск ведется по названию товара, описанию и названию категории.

## Примечания

- YML фид обновляется поставщиком регулярно
- Цены в фиде указаны в рублях
- Картинки доступны по прямым ссылкам
- Рекомендуется запускать скрипт регулярно для актуализации цен

## Интеграция в приложение

Для интеграции загруженных товаров в ваше React приложение:

1. Загрузите товары с помощью скрипта
2. Импортируйте JSON в ваш компонент:
```typescript
import products from '../tehnosib_products.json';
```

3. Или загружайте динамически через API:
```typescript
const response = await fetch('/tehnosib_products.json');
const products = await response.json();
```

## Поддержка

При возникновении проблем проверьте:
- Доступность URL фида: https://tehnosib.ru/upload/export_files/yml_tehnosib_4623.xml
- Наличие Node.js версии 18 или выше
- Доступ к интернету для загрузки фида
